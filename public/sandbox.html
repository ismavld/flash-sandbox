<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>Sandbox</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body class="sandbox-page">
  <div class="toolbar">
    <div class="toolbar-left">
      <a href="/dashboard" class="btn-back">â† Dashboard</a>
      <h1 id="sandboxTitle">Sandbox</h1>
    </div>
    <div class="toolbar-right">
      <span id="status" class="status connecting">Connexion...</span>
       <button id="darkModeToggle" class="btn-dark-mode" onclick="toggleDarkMode()" title="Basculer en mode sombre">
      ğŸŒ™
    </button>
    </div>
  </div>

  <div class="editor-container">
    <textarea 
      id="editor" 
      placeholder="Commencez Ã  taper... Tout est synchronisÃ© en temps rÃ©el."
      spellcheck="false"
    ></textarea>
  </div>

  <div class="action-bar">
    <button id="btnCopy" class="btn btn-secondary">ğŸ“‹ Copier</button>
    <button id="btnClear" class="btn btn-danger">ğŸ—‘ï¸ Effacer tout</button>
    <span id="charCount" class="char-count">0 caractÃ¨res</span>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/supabase-client.js"></script>
  <script src="/client.js"></script>
  <script>
// Fonction de toggle du mode sombre
function toggleDarkMode() {
  const body = document.body;
  const button = document.getElementById('darkModeToggle');
  
  body.classList.toggle('dark-mode');
  
  // Change l'emoji du bouton
  if (body.classList.contains('dark-mode')) {
    button.textContent = 'â˜€ï¸';
    button.title = 'Basculer en mode clair';
    localStorage.setItem('darkMode', 'enabled');
  } else {
    button.textContent = 'ğŸŒ™';
    button.title = 'Basculer en mode sombre';
    localStorage.setItem('darkMode', 'disabled');
  }
}

// Charger la prÃ©fÃ©rence au dÃ©marrage
document.addEventListener('DOMContentLoaded', () => {
  const darkMode = localStorage.getItem('darkMode');
  const button = document.getElementById('darkModeToggle');
  
  if (darkMode === 'enabled') {
    document.body.classList.add('dark-mode');
    if (button) {
      button.textContent = 'â˜€ï¸';
      button.title = 'Basculer en mode clair';
    }
  }
});
</script>
</body>
</html>
